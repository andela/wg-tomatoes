{% extends "base.html" %}
{% load i18n %}
{% load staticfiles %}
{% load wger_extras %}
{% load cache %}

{% block header %}
    <script>
        $(document).ready(function () {
            // Prevent the form from being submited if JavaScript is enabled
            $("#search_form").submit(function () {
                return false;
            });
            $('#choose-English').on('click', function(){
                     $('#en').toggle();
                    $('#all').hide();
     
                })
            $('#choose-Germany').on('click', function(){
                $('#de').toggle();
            $('#all').hide();
        })
            // Init the autocompleter
            $("#ingredient-search").autocomplete({
                serviceUrl: '/api/v2/ingredient/search/',
                dataType: 'json',
                paramName: 'term',
                minChars: 3,
                onSelect: function (suggestion) {
                     window.location.href = '/nutrition/ingredient/' + suggestion.data.id + '/view/'
                }
            });
        });
    </script>
{% endblock %}

{% block title %}{% trans "Ingredient overview" %}{% endblock %}


{% block content %}

    {% if ingredients_list %}
    
        <div class="list-group">
            <div class="tab-content" id ='all'>
            {% for ingredient in ingredients_list %}
                <a class="list-group-item"
                   href="{{ ingredient.get_absolute_url }}">
                    {% if flavour == 'mobile' %}
                        <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                    {% endif %}
                    {{ ingredient.name }}
                   
                </a>
            {% endfor %}
            </div>
            <div class="tab-content" id ='en' style="display:none;">
                    {% for ingredient in ingredients_list %}
                    {% if ingredient.language_id == 2 %}
                        <a class="list-group-item"
                           href="{{ ingredient.get_absolute_url }}">
                            {% if flavour == 'mobile' %}
                                <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                            {% endif %}
                            {{ ingredient.name }}
                           
                        </a>
                    {% endif %}  
                    {% endfor %}
                    </div>
                    <div class="tab-content" id ='de' style="display:none;">
                            {% for ingredient in ingredients_list %}
                            {% if ingredient.language_id == 1 %}
                                <a class="list-group-item"
                                   href="{{ ingredient.get_absolute_url }}">
                                    {% if flavour == 'mobile' %}
                                        <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                                    {% endif %}
                                    {{ ingredient.name }}
                                   
                                </a>
                            {% endif %}  
                            {% endfor %}
                            </div>
        </div>
        {% else %}
        <p>
            <a href="{% url 'nutrition:ingredient:add' %}"
               class="btn btn-default btn-block">
                {% trans "No ingredients." %} {% trans "Add one now." %}
            </a>
        </p>
        {% endif %}
        
        
            <div style="padding-top:3em;"></div>
            {% pagination paginator page_obj %}
{% endblock %}

{% block sidebar %}

    <h4>{% trans "Search" %}</h4>
    <form action="{% url 'ingredient-search' %}"
          method="get"
          id="search_form">
        {% csrf_token %}
        <input name="term"
               type="search"
               id="ingredient-search"
               class="ajax-form-element form-control"
               placeholder="{% trans 'ingredient name' %}"
               style="width:100%;">
    </form>
    <h4>{% trans "Choose exercises based on  the language." %}</h4>
    <div class="btn-group"> 
         <button type="button" class="btn btn-success btn-sm"   id ='choose-English'>
             <img src="/static/images/icons/flag-en.svg"
                  width="18"
                  height="11"
                  alt="{% trans English %}"
                  title="{% trans English %}"
                  style="border: 1px solid #151515;">
                  
             English 
             
         </button>
         
                <button type="button" class="btn btn-success btn-sm"   id ='choose-Germany'>
                    <img src="/static/images/icons/flag-de.svg"
                         width="18"
                         height="11"
                         alt="{% trans Germany %}"
                         title="{% trans Germany %}"
                         style="border: 1px solid #151515;">
                         
                    Germany 
                    
                </button>
            </button>
            
                    <button type="button" class="btn btn-success btn-sm"   id ='choose-Buglarian'>
                        <img src="/static/images/icons/flag-bg.svg"
                             width="18"
                             height="11"
                             alt="{% trans  Buglarian %}"
                             title="{% trans  Buglarian %}"
                             style="border: 1px solid #151515;">
                             
                        Buglarian
                        
                    </button>
            
          
                    <button type="button" class="btn btn-success btn-sm"   id ='choose-Spanish'>
                        <img src="/static/images/icons/flag-es.svg"
                             width="18"
                             height="11"
                             alt="{% trans  Spanish %}"
                             title="{% trans  Spanish %}"
                             style="border: 1px solid #151515;">
                             
                        Spanish
                        
                    </button>
    </div>
{% endblock %}


{#         #}
{# Options #}
{#         #}
{% block options %}
    {% if user.is_authenticated and not user.userprofile.is_temporary %}
        <a href="{% url 'nutrition:ingredient:add' %}"
           class="btn btn-success btn-sm">
            {% trans "Add ingredient" %}
        </a>
    {% else %}
        <a href="#" class="btn btn-success btn-sm disabled">
            {% trans "Add ingredient" %}<br>
            <small>
                {% trans "Only registered users can do this" %}
            </small>
        </a>
    {% endif %}
{% endblock %}
